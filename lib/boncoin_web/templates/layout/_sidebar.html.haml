%div{id: "navbarDismiss"}
  %i.fas.fa-times-circle.text-white
%nav.bg-white{id: "sidebar"}
  - link to: root_path(@conn, :welcome), class: "brand-logo text-white" do
    .sidebar-header.bg-primary.text-white
      %h3= "PawChaungKaung"
  %div{id: "mainMenu"}
    %ul.list-unstyled.components

      %a.slide-menu.text-dark.border-bottom.border-dark.dropdown-toggle{href: "#menuDivision", data-parent: "#mainMenu", data-toggle: "collapse", aria-expanded: "false"}
        %i.width-20.fa.fa-map-marker-alt
        %span= gettext "Where do you search ?"
      %ul.collapse.list-unstyled.collapse-level1{id: "menuDivision"}
        - link to: public_offers_path(@conn, :public_index, search: %{division_id: "", township_id: ""}, old_search: @conn.assigns.search_params), class: "" do
          %li.slide-menu.text-dark.border-bottom.border-dark
            %i.width-20.fa.fa-
            %span= gettext "All Myanmar"
        - for division <- @conn.assigns.select_menus.divisions do
          -# Nested parent
          %a.slide-menu.text-dark.border-bottom.border-dark.dropdown-toggle{href: "#subMenuDivision_#{division.id}", data-parent="#subMenuDivision_#{division.id}", data-toggle: "collapse", aria-expanded: "false"}
            %i.width-20.fa.fa-
            %span= LayoutView.convert_zawgyi(division, "title")
          -# Nested child
          %ul.collapse.list-unstyled.collapse-level2{id: "subMenuDivision_#{division.id}"}
            - link to: public_offers_path(@conn, :public_index, search: %{division_id: "#{division.id}", township_id: ""}, old_search: @conn.assigns.search_params) do
              %li.slide-menu.text-dark.border-bottom.border-dark
                %i.width-20.fa.fa-
                %span= gettext("All %{division_title}", division_title: LayoutView.convert_zawgyi(division, "title"))
            - for township <- division.townships do
              - link to: public_offers_path(@conn, :public_index, search: %{division_id: "#{division.id}", township_id: "#{township.id}"}, old_search: @conn.assigns.search_params) do
                %li.slide-menu.text-dark.border-bottom.border-dark
                  %i.width-20.fa.fa-
                  %span= LayoutView.convert_zawgyi(township, "title")

      - link to: announce_path(@conn, :new), class: "" do
        %li.slide-menu.text-dark.border-bottom.border-dark
          %i.width-20.fa.fa-edit
          %span= gettext "Sell something"

      %a.slide-menu.text-dark.border-bottom.border-dark.dropdown-toggle{href: "#languageSubmenu", data-toggle: "collapse", aria-expanded: "false"}
        = img_tag static_path(@conn, "/fonts/#{@conn.assigns.flag}.svg"), class: "flag"
        %span= gettext "Change language"
      %ul.collapse.list-unstyled.collapse-level1{id: "languageSubmenu"}
        %a{href: "?locale=en"}
          %li.slide-menu.text-dark.border-bottom.border-dark
            = img_tag static_path(@conn, "/fonts/en.svg"), class: "flag"
            %span{class: "#{LayoutView.test_lg(@conn.assigns.flag, 1)}"}= gettext "English"
        %a{href: "?locale=my"}
          %li.slide-menu.text-dark.border-bottom.border-dark{class: ""}
            = img_tag static_path(@conn, "/fonts/my.svg"), class: "flag"
            %span{class: "#{LayoutView.test_lg(@conn.assigns.flag, 2)}"}= gettext "Myanmar (Unicode)"
        %a{href: "?locale=mr"}
          %li.slide-menu.text-dark.border-bottom.border-dark{class: ""}
            = img_tag static_path(@conn, "/fonts/mr.svg"), class: "flag"
            %span{class: "#{LayoutView.test_lg(@conn.assigns.flag, 3)}"}= gettext "Myanmar (Zawgyi)"

      - link to: main_path(@conn, :viber), class: "" do
        %li.slide-menu.text-dark.border-bottom.border-dark
          %i.width-20.fab.fa-viber
          %span= gettext "Viber notifications"

      - link to: main_path(@conn, :conditions), class: "" do
        %li.slide-menu.text-dark.border-bottom.border-dark
          %i.width-20.fa.fa-balance-scale
          %span= gettext "Conditions"

      - link to: main_path(@conn, :about), class: "" do
        %li.width-20.slide-menu.text-dark.border-bottom.border-dark
          %i.width-20.fa.fa-building
          %span= gettext "The company"

      %a.slide-menu.text-dark.border-bottom.border-dark.dropdown-toggle{href: "#technicalSubmenu", data-toggle: "collapse", aria-expanded: "false"}
        %i.width-20.fa.fa-wrench
        %span= gettext "Technical"
      %ul.collapse.list-unstyled.collapse-level1{id: "technicalSubmenu"}
        - if LayoutView.check_admin(@conn.assigns[:current_user]) do
          - link to: auth_path(@conn, :delete), method: :delete, class: "" do
            %li.slide-menu.text-dark.border-bottom.border-dark
              %i.width-20.fa.fa-sign-out-alt
              %span= gettext "Log out"
          - link to: main_path(@conn, :dashboard) do
            %li.slide-menu.text-dark.border-bottom.border-dark
              %i.width-20.fa.fa-code-branch
              %span= "#{Application.spec(:boncoin, :vsn)}"
        - else
          - link to: auth_path(@conn, :request, "google"), class: "" do
            %li.slide-menu.text-dark.border-bottom.border-dark
              %i.width-20.fa.fa-user
              %span= gettext "Log in"
